<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Live Data Plot</title>
        <style>
         html, body {
             margin: 0;
             padding: 0;
             width: 100%;
             height: 100%;
             background-color: #333; /* Tmavé pozadie */
             color: #fff;
         }
         #graph {
             width: 100%;
             height: 100%;
             background-color: #222;
         }
        </style>
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    </head>
    <body>
        <div id="graph"></div>
        <script>
         var initialPlot = true;
         var layout = {
             xaxis: {
                 rangeslider: { visible: false },
                 color: '#fff',
                 nticks: 20, // aka husta bude mriezka
		 tickformat: '%H:%M:%S'
             },
             yaxis: {
                 fixedrange: false,
                 color: '#fff',
                 //nticks: 10 // aka husta bude mriezka
		 tickvals: [80, 80.5, 81, 81.5, 82, 82.5, 83, 83.5, 84, 84.5, 85, 85.5, 86, 86.5, 87, 87.5, 88, 88.5, 89, 89.5, 90, 90.5, 91, 91.5, 92, 92.5, 93, 93.5, 94, 94.5, 95, 95.5, 96, 96.5, 97, 97.5, 98, 98.5, 99, 99.5, 100, 100.5, 101, 101.5, 102, 102.5, 103, 103.5, 104, 104.5, 105, 105.5, 106, 106.5, 107, 107.5, 108, 108.5, 109, 109.5, 110, 110.5, 111, 111.5, 112, 112.5, 113, 113.5, 114, 114.5, 115, 115.5, 116, 116.5, 117, 117.5, 118, 118.5, 119, 119.5, 120, 120.5, 121, 121.5, 122, 122.5, 123, 123.5, 124, 124.5, 125, 125.5, 126, 126.5, 127, 127.5, 128, 128.5, 129, 129.5, 130, 130.5, 131, 131.5, 132, 132.5, 133, 133.5, 134, 134.5, 135, 135.5, 136, 136.5, 137, 137.5, 138, 138.5, 139, 139.5, 140, 140.5, 141, 141.5, 142, 142.5, 143, 143.5, 144, 144.5, 145, 145.5, 146, 146.5, 147, 147.5, 148, 148.5, 149, 149.5, 150, 150.5, 151, 151.5, 152, 152.5, 153, 153.5, 154, 154.5, 155, 155.5, 156, 156.5, 157, 157.5, 158, 158.5, 159, 159.5, 160, 160.5, 161, 161.5, 162, 162.5, 163, 163.5, 164, 164.5, 165, 165.5, 166, 166.5, 167, 167.5, 168, 168.5, 169, 169.5, 170, 170.5, 171, 171.5, 172, 172.5, 173, 173.5, 174, 174.5, 175, 175.5, 176, 176.5, 177, 177.5, 178, 178.5, 179, 179.5, 180, 180.5, 181, 181.5, 182, 182.5, 183, 183.5, 184, 184.5, 185, 185.5, 186, 186.5, 187, 187.5, 188, 188.5, 189, 189.5, 190, 190.5, 191, 191.5, 192, 192.5, 193, 193.5, 194, 194.5, 195, 195.5, 196, 196.5, 197, 197.5, 198, 198.5, 199, 199.5, 200, 200.5, 201, 201.5, 202, 202.5, 203, 203.5, 204, 204.5, 205, 205.5, 206, 206.5, 207, 207.5, 208, 208.5, 209, 209.5, 210, 210.5, 211, 211.5, 212, 212.5, 213, 213.5, 214, 214.5, 215, 215.5, 216, 216.5, 217, 217.5, 218, 218.5, 219, 219.5, 220, 220.5, 221, 221.5, 222, 222.5, 223, 223.5, 224, 224.5, 225, 225.5, 226, 226.5, 227, 227.5, 228, 228.5, 229, 229.5, 230, 230.5, 231, 231.5, 232, 232.5, 233, 233.5, 234, 234.5, 235, 235.5, 236, 236.5, 237, 237.5, 238, 238.5, 239, 239.5, 240, 240.5, 241, 241.5, 242, 242.5, 243, 243.5, 244, 244.5, 245, 245.5, 246, 246.5, 247, 247.5, 248, 248.5, 249, 249.5],
		 ticktext: ['80', '80.5', '81', '81.5', '82', '82.5', '83', '83.5', '84', '84.5', '85', '85.5', '86', '86.5', '87', '87.5', '88', '88.5', '89', '89.5', '90', '90.5', '91', '91.5', '92', '92.5', '93', '93.5', '94', '94.5', '95', '95.5', '96', '96.5', '97', '97.5', '98', '98.5', '99', '99.5', '100', '100.5', '101', '101.5', '102', '102.5', '103', '103.5', '104', '104.5', '105', '105.5', '106', '106.5', '107', '107.5', '108', '108.5', '109', '109.5', '110', '110.5', '111', '111.5', '112', '112.5', '113', '113.5', '114', '114.5', '115', '115.5', '116', '116.5', '117', '117.5', '118', '118.5', '119', '119.5', '120', '120.5', '121', '121.5', '122', '122.5', '123', '123.5', '124', '124.5', '125', '125.5', '126', '126.5', '127', '127.5', '128', '128.5', '129', '129.5', '130', '130.5', '131', '131.5', '132', '132.5', '133', '133.5', '134', '134.5', '135', '135.5', '136', '136.5', '137', '137.5', '138', '138.5', '139', '139.5', '140', '140.5', '141', '141.5', '142', '142.5', '143', '143.5', '144', '144.5', '145', '145.5', '146', '146.5', '147', '147.5', '148', '148.5', '149', '149.5', '150', '150.5', '151', '151.5', '152', '152.5', '153', '153.5', '154', '154.5', '155', '155.5', '156', '156.5', '157', '157.5', '158', '158.5', '159', '159.5', '160', '160.5', '161', '161.5', '162', '162.5', '163', '163.5', '164', '164.5', '165', '165.5', '166', '166.5', '167', '167.5', '168', '168.5', '169', '169.5', '170', '170.5', '171', '171.5', '172', '172.5', '173', '173.5', '174', '174.5', '175', '175.5', '176', '176.5', '177', '177.5', '178', '178.5', '179', '179.5', '180', '180.5', '181', '181.5', '182', '182.5', '183', '183.5', '184', '184.5', '185', '185.5', '186', '186.5', '187', '187.5', '188', '188.5', '189', '189.5', '190', '190.5', '191', '191.5', '192', '192.5', '193', '193.5', '194', '194.5', '195', '195.5', '196', '196.5', '197', '197.5', '198', '198.5', '199', '199.5', '200', '200.5', '201', '201.5', '202', '202.5', '203', '203.5', '204', '204.5', '205', '205.5', '206', '206.5', '207', '207.5', '208', '208.5', '209', '209.5', '210', '210.5', '211', '211.5', '212', '212.5', '213', '213.5', '214', '214.5', '215', '215.5', '216', '216.5', '217', '217.5', '218', '218.5', '219', '219.5', '220', '220.5', '221', '221.5', '222', '222.5', '223', '223.5', '224', '224.5', '225', '225.5', '226', '226.5', '227', '227.5', '228', '228.5', '229', '229.5', '230', '230.5', '231', '231.5', '232', '232.5', '233', '233.5', '234', '234.5', '235', '235.5', '236', '236.5', '237', '237.5', '238', '238.5', '239', '239.5', '240', '240.5', '241', '241.5', '242', '242.5', '243', '243.5', '244', '244.5', '245', '245.5', '246', '246.5', '247', '247.5', '248', '248.5', '249', '249.5']
             },
             paper_bgcolor: '#222',
             plot_bgcolor: '#222',
             font: {
                 color: '#fff'
             },
             autosize: true, // Automatické prispôsobenie veľkosti
             margin: { l: 50, r: 50, t: 50, b: 50 } // Nastavenie okrajov
         };
         var config = {
             displayModeBar: false,
             scrollZoom: true,
             dragMode: 'pan',
             responsive: true // Pridanie reaktivity na zmenu veľkosti okna
         };

         function fetchData() {
             fetch('/data')
                 .then(response => response.json())
                 .then(data => {
                     if (Object.keys(data).length > 0) {
                         var sviecky = {
                             x: data.x,
                             close: data.close,
                             open: data.open,
                             high: data.high,
                             low: data.low,
                             type: 'candlestick',
			     name: 'sviecky',
                             hoverinfo: 'none' // Vypnutie tooltipov
                         };
			 var arca ={
			     x: data.arca_x,
			     y: data.arca_y,
			     type: 'scatter',
			     mode: 'markers',
			     marker: {
				 size: data.arca_v,
				 color: '#1f77b4',  // muted blue
				 opacity: 0.5
			     },
			     name: 'ARCA',
			     hoverinfo: 'none'
			 };
			 var bats ={
			     x: data.bats_x,
			     y: data.bats_y,
			     type: 'scatter',
			     mode: 'markers',
			     marker: {
				 size: data.bats_v,
				 color: '#ff7f0e',  // safety orange
				 opacity: 0.5
			     },
			     name: 'BATS',
			     hoverinfo: 'none'
			 };
			 var drctedge ={
			     x: data.drctedge_x,
			     y: data.drctedge_y,
			     type: 'scatter',
			     mode: 'markers',
			     marker: {
				 size: data.drctedge_v,
				 color: '#2ca02c',  // cooked asparagus green
				 opacity: 0.5
			     },
			     name: 'DRCTEDGE',
			     hoverinfo: 'none'
			 };
			 var nasdaq ={
			     x: data.nasdaq_x,
			     y: data.nasdaq_y,
			     type: 'scatter',
			     mode: 'markers',
			     marker: {
				 size: data.nasdaq_v,
				 color: '#e377c2',  // raspberry yogurt pink
				 opacity: 0.5
			     },
			     name: 'NASDAQ',
			     hoverinfo: 'none'
			 };
			 var smart ={
			     x: data.smart_x,
			     y: data.smart_y,
			     type: 'scatter',
			     mode: 'markers',
			     marker: {
				 size: data.smart_v,
				 color: '#17becf',   // blue-teal
				 opacity: 0.5
			     },
			     name: 'SMART',
			     hoverinfo: 'none'
			 };
                         Plotly.newPlot('graph', [sviecky, arca, bats, drctedge, nasdaq, smart], layout, config);
                     }
                 });
         }

         // Počiatočné načítanie dát
         fetchData();
        </script>
    </body>
</html>

